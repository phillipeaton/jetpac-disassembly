<!DOCTYPE html>
<html>
<head>
<title>jetpac: Routine at 70fb</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">jetpac</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="28917.html">70f5</a>
</td>
<td class="up">Up: <a href="../maps/all.html#28923">Map</a></td>
<td class="next">
Next: <a href="28949.html">7115</a>
</td>
</tr>
</table>
<div class="description">70fb: Display a score.</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Scores are stored as decimal values in 3-bytes (making 999999 the maximum score). A score of 15,120 decimal is stored in hex as: $01,$51,$20. This routine displays each byte (reading left-to-right) of the score in two steps.
</div>
</div>
<table class="input">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">HL</td>
<td class="register-desc">Screen address of the score to be written.</td>
</tr>
<tr>
<td class="register">DE</td>
<td class="register-desc">The 3-byte score value (P1, P2, HI).</td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="address-2"><span id="28923"></span>70fb</td>
<td class="instruction">ld b,$03</td>
<td class="comment-1" rowspan="1">Loop counter for the 3 bytes</td>
</tr>
<tr>
<td class="address-2"><span id="28925"></span>70fd</td>
<td class="instruction">ld a,(de)</td>
<td class="comment-1" rowspan="1">Score value. Example, if 85 points:</td>
</tr>
<tr>
<td class="address-1"><span id="28926"></span>70fe</td>
<td class="instruction">rrca</td>
<td class="comment-1" rowspan="1">A=11000010, C=1</td>
</tr>
<tr>
<td class="address-1"><span id="28927"></span>70ff</td>
<td class="instruction">rrca</td>
<td class="comment-1" rowspan="1">A=01100001, C=0</td>
</tr>
<tr>
<td class="address-1"><span id="28928"></span>7100</td>
<td class="instruction">rrca</td>
<td class="comment-1" rowspan="1">A=10110000, C=1</td>
</tr>
<tr>
<td class="address-1"><span id="28929"></span>7101</td>
<td class="instruction">rrca</td>
<td class="comment-1" rowspan="1">A=01011000, C=0</td>
</tr>
<tr>
<td class="address-1"><span id="28930"></span>7102</td>
<td class="instruction">and $0f</td>
<td class="comment-1" rowspan="1">A=00001000</td>
</tr>
<tr>
<td class="address-1"><span id="28932"></span>7104</td>
<td class="instruction">add a,$30</td>
<td class="comment-1" rowspan="1">A=00111000 - $30 + $08 = ASCII char `8`</td>
</tr>
<tr>
<td class="address-1"><span id="28934"></span>7106</td>
<td class="instruction">call <a href="28949.html">$7115</a></td>
<td class="comment-1" rowspan="1">Display font character</td>
</tr>
<tr>
<td class="address-1"><span id="28937"></span>7109</td>
<td class="instruction">ld a,(de)</td>
<td class="comment-1" rowspan="1">And again with the same byte:</td>
</tr>
<tr>
<td class="address-1"><span id="28938"></span>710a</td>
<td class="instruction">and $0f</td>
<td class="comment-1" rowspan="1">A=00000101</td>
</tr>
<tr>
<td class="address-1"><span id="28940"></span>710c</td>
<td class="instruction">add a,$30</td>
<td class="comment-1" rowspan="1">A=00110101 - $30 + $05 = ASCII char `5`</td>
</tr>
<tr>
<td class="address-1"><span id="28942"></span>710e</td>
<td class="instruction">call <a href="28949.html">$7115</a></td>
<td class="comment-1" rowspan="1">Display font character</td>
</tr>
<tr>
<td class="address-1"><span id="28945"></span>7111</td>
<td class="instruction">inc de</td>
<td class="comment-1" rowspan="2">Process next score byte</td>
</tr>
<tr>
<td class="address-1"><span id="28946"></span>7112</td>
<td class="instruction">djnz $70fd</td>
</tr>
<tr>
<td class="address-1"><span id="28948"></span>7114</td>
<td class="instruction">ret</td>
<td class="comment-1" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="28917.html">70f5</a>
</td>
<td class="up">Up: <a href="../maps/all.html#28923">Map</a></td>
<td class="next">
Next: <a href="28949.html">7115</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright"></div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.6b1.</div>
</footer>
</body>
</html>